# 도메인 서비스 활용

문제 영역을 모델링할 때 당면한 작업이 지금까지 본 도메인 헥사곤, 엔티티, 값 객체, 애그리게잇 등<br/>
어떤 범주에도 적합하지 않은 상황에 직면하게 될 것이다.<br/>
이러한 객체를 가리켜 도메인 서비스(Domain service) 라고 부른다.<br/>

도메인 서비스를 다른 서비스 타입과 구별하는 것은 중요하다.<br/>
무엇이 서비스를 만드는가? 서비스는 무언가 가치 있는 활동을 수행하는 능력이다.<br/>
컴퓨터 세상에서는 훌륭한 아키텍처를 위해 관심사의 분리(SoC: Separation of Concerns), 모듈화, 디커플링 등이 있다.<br/>

도메인 서비스들을 도메인 헥사곤의 영역으로 규정하는 것 또한 관심사를 기반으로 한다.<br/>
도메인 서비스는 다른 서비스와 마찬가지로 가치 있는 작업을 수행하지만, 문제 영역의 제한된 범위 내에서만 수행한다.<br/>
이는 도메인 서비스가 애플리케이션 헥사곤이나 프레임워크 헥사곤에서 동작하는 서비스나 다른 객체를 호출해서는 안 된다는 의미다.<br/>

엔티티와 값 객체에 잘 어울리지 않는 작업을 처리하는 도메인 서비스 클래스에 책임을 위임한다.<br/>

## 정책 패턴과 명세 패턴을 활용한 비즈니스 규칙 처리

시스템이 가지고 있는 가장 큰 가치 중 하나는 성문화된 비즈니스 규칙이다.<br/>
DDD 에서는 문제 영역을 올바르게 모델링하기 위해 도메인 전문가와 긴밀하게 협력하는 것이 얼마나 중요한지 배운다.<br/>

### 정책 (Policy)

전략(strategy) 으로도 알려져 있으며, 코드 블록으로 문제 영역의 일부를 캡슐화하는 패턴이다.<br/>
제공된 데이터에 대해 어떤 작업이나 처리를 한다는 점이다.<br/>
정책은 커플링을 피하기 위해 의도적으로 엔티티와 값 객체를 분리해 유지한다.<br/>

### 명세 (Spectification)

객체의 특성을 보장하는 데 사용되는 조건(Condition)이나 프레디케이트(predicate) 와 같다.<br/>
이러한 명세들을 캡슐화하면 재사용할 수 있고 함께 결합해서 문제 영역을 더 잘 표현할 수 있다.<br/>

정책과 명세는 코드 전반에 걸쳐 비즈니스 규칙의 견고성과 일관성을 향상시키는 믿을만한 기법이다.<br/>
명세는 정책에 적합한 개체만 처리되는 것을 보장한다.<br/>
정책을 통해 다양하면서도 손쉽게 변경할 수 있는 알고리즘을 자유자재로 활용할 수 있다.<br/>

정책과 명세는 비즈니스 규칙을 잘 표현하기 위함이므로 문제 영역의 일부를 규정짓는 것이 중요하다.<br/>
문제 영역을 올바르게 이해하는 것의 출발은 역시나 도메인에 대한 지식이다.<br/>